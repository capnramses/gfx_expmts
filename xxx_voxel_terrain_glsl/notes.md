Could be done in:

* frag shader
* compute shader
* kernel (easy to port from C)
* or in SW.

If done in a fragment shader it could also write values in the/a depth buffer. 

